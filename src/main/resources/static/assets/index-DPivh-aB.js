import{s as x}from"./sysuser-B1G0AudW.js";import{r as u,u as y,c as S,w as a,o as k,a as e,b as B,d as I,p as U,e as V,f as z}from"./index-DwARuaTP.js";import{_ as N,B as R}from"./_plugin-vue_export-helper-Di4M-4iM.js";import{_ as $,a as q}from"./Grid-CSHXzIiK.js";import{_ as C,a as L,b as T}from"./request-gITGYgwF.js";import{_ as j}from"./Card-CAlJ-zJ5.js";const A=t=>(U("data-v-8d9a8d26"),t=t(),V(),t),D=A(()=>z("h1",null,"登录",-1)),E={__name:"index",setup(t){const d=I(),s=u(!1),_=u(),o=u({account:"",password:""}),i={account:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5-10 位的字母或数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{5,12}$/,message:"密码必须为 5-12 位且不包含空格",trigger:"blur"}]},m=y(),f=async()=>{await _.value.validate(),s.value=!0,await x(o.value).then(async({data:c})=>{m.setUserInfo(c),s.value=!1,window.$message.success("登录成功"),await d.push("/")}).catch(()=>{s.value=!1})};return(c,n)=>{const l=C,p=L,g=R,v=T,b=j,w=q,h=$;return k(),S(h,{cols:4,class:"login-page"},{default:a(()=>[e(w,{offset:1,span:2,class:"login-form"},{default:a(()=>[e(b,{size:"large",hoverable:""},{default:a(()=>[e(v,{ref_key:"formRef",ref:_,model:o.value,size:"large",rules:i},{default:a(()=>[e(l,null,{default:a(()=>[D]),_:1}),e(l,{label:"用户名",path:"account"},{default:a(()=>[e(p,{value:o.value.account,"onUpdate:value":n[0]||(n[0]=r=>o.value.account=r),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),e(l,{label:"密码",path:"password"},{default:a(()=>[e(p,{type:"password",value:o.value.password,"onUpdate:value":n[1]||(n[1]=r=>o.value.password=r),placeholder:"请输入密码"},null,8,["value"])]),_:1}),e(l,null,{default:a(()=>[e(g,{type:"primary",block:"",bordered:"",strong:"",size:"large",onClick:f,loading:s.value,disabled:s.value},{default:a(()=>[B("登 录")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}},O=N(E,[["__scopeId","data-v-8d9a8d26"]]);export{O as default};
